<!DOCTYPE html>
<html>
<% include ./partials/header %>

	<body>
	<div class="row">
 	<div class="col-sm-6">
 	<h3>Add New Tool : </h3>
 	<hr>
 	<form method="POST">
				<span>
				<select name="tool" id="dropdown" class="custom-select">
				<% for(t in allTools){ %>
					<option value="<%= allTools[t]._id%>" > <%= allTools[t].name %> </option>
				<%}%>
				</select>
				<br><br>

				<input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" name="name" placeholder="Add New Tool Name"><br>
				<input type="text" class="form-control" id="inputWeight" aria-label="Default" aria-describedby="inputGroup-sizing-default" name="weightage" placeholder="Weightage"><br>
				<input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" name="targetStudent" placeholder="Target students"><br>
				<input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" name="totalMark" placeholder="Total Marks"><br>
				<input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" name="targetMark" placeholder="Target Marks"><br>
				<input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" name="high" placeholder="high"><br>
				<input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" name="mid" placeholder="mid"><br>
				<input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" name="low" placeholder="low"><br>
				<select name="toolType" class="custom-select">
				<option value="Direct" >Direct</option>
				<option value="Indirect" >Indirect</option>
				<br>
				</select><br><br>
				<button id="formSubmit" class="btn btn-outline-success btn-lg btn-block">Submit </button>
			</span>
		</form>
	</div>

 	<div class="col-sm-6">
 	<span>
 	<h3>           My Tools : </h3>
 	<hr>
 	<table border="0" cellspacing="40" cellpadding="20">
		<% for (t in thisToolNames ){ %>

		<tr>
		<td class="<%= t %>"><button class="btn btn-outline-dark btn-lg btn-block"> <%= thisToolNames[t] %> </button>
		</td>
		<td>
		<form action="tool/<%= tools[t]._id %>/delete" method="POST">
			<button class="btn btn-outline-danger btn-lg">Delete</button>
		</form>
		</td>
		</tr>

	    <% } %>
	</table>
	<h5> <span data-toggle="modal" class="btn btn-block" data-target="#myMod">View Detailed Info</span> </h5>
	</span>


	<!-- The Modal -->
	<div class="modal fade" id="myMod">
		<div class="modal-dialog">
			<div class="modal-content">

				<!-- Modal Header -->
				<div class="modal-header">
				    <h4 class="modal-title">My Tool </h4>
				    <button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>

				<!-- Modal body -->
				<div class="modal-body">
					<% for(tool in tools) { %>
			        <table class="table">
								<tbody>

								<tr>
								<td>Name : </td>
								<td id="weightage">
									<td><%= thisToolNames[tool] %></td>
								</td>
							</tr>
			        		<tr>
				              <td>Weightage : </td>
				              <td id="weightage">
				              	<td class="weight" id="<%= tools[tool].weightage %>"><%= tools[tool].weightage %></td>
				              </td>

				            </tr>
				            <tr>
							  <td>Target No. Of Student : </td>
				              <td id="targetStudent">
				              </td>
				              <td>
				              	<%= tools[tool].targetStudent %>
				                <!--  -->
				              </td>
				              <tr>
								<td>Total marks : </td>
				                <td id="totalMark"> </td>
				                <td>
				                	<%= tools[tool].totalMark %>
				                  <!--  -->
				                </td>
				              </tr>
				              <tr>
								<td>Total No. Of Students : </td>
				                <td id="totalStud"> </td>
				                <td>
				                	<%= tools[tool].totalStud %>
				                  <!--  -->
				                </td>
				              </tr>
				              <tr>
								<td>No. Of Students Achieved Target : </td>
				                <td id="studentsAchieved"> </td>
				                <td>
				                	<%= tools[tool].studentsAchieved %>
				                  <!--  -->
				                </td>
				              </tr>
				              <tr>
								<td>Type of Tool : </td>
				                <td id="toolType"> </td>
				                <td>
				                  <!--  -->
				                  <%= tools[tool].toolType %>
				                </td>
				              </tr>
				              <tr>
								<td>High : </td>
				                <td id="high"> </td>
				                <td>
				                  <!--  -->
				                  <%= tools[tool].high %>
				                </td>
				              </tr>
				              <tr>
								<td>Mid : </td>
				                <td id="mid"> </td>
				                <td>
				                  <!--  -->
				                  <%= tools[tool].mid %>
				                </td>
				              </tr>
				              <tr>
								<td>Low : </td>
				                <td id="low"> </td>
				                <td>
				                	<%= tools[tool].low %>
				                  <!--  -->
				                </td>
				              </tr>
				              <tr>
								<td>Point : </td>
				                <td id="point">
				                <%= tools[tool].point %>
				                  <!--  -->
				                </td>
										</tr>
									<hr>
				        </tbody>
					</table>
				<% } %>
				</div>

			</div>
		</div>
	</div>

 			</div>




			 <script>
				 var totW = 0;
				 $('.weight').each(function(item){
					 totW+= parseFloat($(this).attr('id'));
				 });

				 $('#inputWeight').keyup(function(){
					 if( $(this).val() > (1-totW) ){
						 console.log("dis")
						 $('#formSubmit').prop('disabled', 'true');
					 }
					 else{
						console.log("abl")
						$('#formSubmit').removeAttr('disabled');
					 }
				 })



			 </script>


			<% include ./partials/footer %>
				</body>

</html>
